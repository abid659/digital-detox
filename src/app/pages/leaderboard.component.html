<div class="container">
  <h2>üèÜ ‡¶≤‡¶ø‡¶°‡¶æ‡¶∞‡¶¨‡ßã‡¶∞‡ßç‡¶°</h2>

  <div class="admin-greeting" *ngIf="adminName">
    üëã ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ, {{ adminName }} (Abid Ahmad)
  </div>
  <br>


  <form [formGroup]="filterForm" (ngSubmit)="loadLeaderboard()">
    <mat-form-field appearance="fill">
      <mat-label>From Date</mat-label>
      <input matInput type="date" formControlName="fromDate">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>To Date</mat-label>
      <input matInput type="date" formControlName="toDate">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Class</mat-label>
      <mat-select formControlName="selectedClass">
        <mat-option value="">All</mat-option>
        <mat-option [value]="3">3</mat-option>
        <mat-option [value]="4">4</mat-option>
      </mat-select>
    </mat-form-field>




    <button mat-raised-button color="primary" type="submit">Search</button>
  </form>
  <div *ngIf="hasSearched && leaderboard.length === 0">
    <p>‡¶ï‡ßã‡¶® ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø</p>
  </div>

  <button mat-button color="primary" (click)="exportCSV()">Export CSV</button>

  <ng-container matColumnDef="sl">
    <th mat-header-cell *matHeaderCellDef> # </th>
    <td mat-cell *matCellDef="let element; let i = index">
      {{ i + 1 }}
    </td>
  </ng-container>

  <mat-table [dataSource]="leaderboard" *ngIf="leaderboard.length" class="mat-elevation-z8">
    <ng-container matColumnDef="name">
      <mat-header-cell *matHeaderCellDef>‡¶®‡¶æ‡¶Æ</mat-header-cell>
      <mat-cell *matCellDef="let row">{{ row.name }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="class">
      <mat-header-cell *matHeaderCellDef>‡¶∂‡ßç‡¶∞‡ßá‡¶£‡¶ø</mat-header-cell>
      <mat-cell *matCellDef="let row">{{ row.class }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="roll">
      <mat-header-cell *matHeaderCellDef>‡¶∞‡ßã‡¶≤</mat-header-cell>
      <mat-cell *matCellDef="let row">{{ row.roll }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="yesCount">
      <mat-header-cell *matHeaderCellDef>‡¶π‡ßç‡¶Ø‡¶æ‡¶Å ‡¶è‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ</mat-header-cell>
      <mat-cell *matCellDef="let row">{{ row.yesCount }}</mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="['name', 'class', 'roll', 'yesCount']"></mat-header-row>
    <mat-row *matRowDef="let row; columns: ['name', 'class', 'roll', 'yesCount']"></mat-row>
  </mat-table>


  <div *ngIf="loading">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
  <div *ngIf="error" class="error">{{ error }}</div>
</div>
